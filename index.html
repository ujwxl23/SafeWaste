<!DOCTYPE html>
<html>
    <head>
        <link href="https://fonts.googleapis.com/css?family=Plus+Jakarta+Sans&display=swap" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Gotham+Black&display=swap" rel="stylesheet" />
        <link href="./css/main.css" rel="stylesheet" />
        <title>Document</title>
    </head>
    <body>
        <div class="v1_2">
            <div class="v1_4"></div>
            <div class="v1_6"></div>
            <!-- <div class="v3_17"> -->
                <!-- <div class="v3_18"></div> -->
                <!-- <span class="v3_19">SIGN IN TO GOOGLE</span> -->
            <!-- </div> -->
            <!-- <div class="v1_9"></div> -->
            <span class="v1_10">HELLO AGAIN!!</span>
            <!-- <div class="v1_12"></div> -->
            <!-- <div class="v1_13"></div> -->
            <div class="v3_14">USERNAME
            <div class="mt-2 absolute top-349px left-800px">
                <input id="username" name="username" type="text" autocomplete="current-username"  placeholder="Username" required
                    class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
            </div></div>
            <div class="v3_15">MixedWaste
                <div class="mt-2 absolute top-349px left-800px">
                    <input id="mixedwaste" name="mixedwaste" type="number" autocomplete="current-mixedwaste" placeholder="MixedWaste" required
                        class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                </div>
            </div>
            <div class="v3_23">DryWaste
                <div class="mt-2 absolute top-349px left-800px">
                    <input id="drywaste" name="drywaste" type="number" autocomplete="current-drywaste" placeholder="DryWaste" required
                        class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                </div>
            </div>
            <div class="v3_22">WetWaste
                <div class="mt-2 absolute top-349px left-800px">
                    <input id="wetwaste" name="wetwaste" type="number" autocomplete="current-wetwaste" placeholder="WetWaste" required
                        class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                </div>
            </div>
            <div class="v3_20">SponsorWaste
                <div class="mt-2 absolute top-349px left-800px">
                    <input id="sponsorwaste" name="sponsorwaste" type="number" autocomplete="current-sponsorwaste" placeholder="SponsorWaste" required
                        class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                </div>
            </div>
            <div class="v3_19">PASSWORD
            <div class="mt-2 absolute top-349px left-800px">
                <input id="password" name="password" type="password" autocomplete="current-password" placeholder="Password" required
                    class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
            </div>
            <!-- <div class="v3_21"></div> -->
            <div class="py-3">
                <button type="submit" id="signin">Submit</button>
            </div></div>
            <br>
            <div class="v1_20">Get Details..</div>
            <div class="v3_25">Enter username for details..
            <div class="mt-2 absolute top-349px left-800px">
                <input id="finduser" name="finduser" type="text" autocomplete="current-finduser" placeholder="UsernameReq" required
                    class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
            </div>
            <div class="py-3">
                <button type="submit" id="fulldetails">Show</button>
            </div></div>
            <div class="v1_22">Your Token = </div>
            <div class="v1_21" id="getToken"></div>
            <div class="name"></div>
        </div>
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
          
            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
              apiKey: "AIzaSyAj14TDiqs8txI5vnY5jWfkHiPsvbIqMOU",
              authDomain: "fir-718ed.firebaseapp.com",
              databaseURL: "https://fir-718ed-default-rtdb.firebaseio.com",
              projectId: "fir-718ed",
              storageBucket: "fir-718ed.appspot.com",
              messagingSenderId: "374081504573",
              appId: "1:374081504573:web:153d18a9e9ad2d9598f154",
              measurementId: "G-JQVKR5SZB5"
            };
          
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);

            import {getDatabase, set, get, update, remove, ref, child}
            from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js"

            const db = getDatabase();

            var username = document.querySelector("#username");
            var mixedwaste = document.querySelector("#mixedwaste");
            var drywaste = document.querySelector("#drywaste");
            var wetwaste = document.querySelector("#wetwaste");
            var sponsorwaste = document.querySelector("#sponsorwaste");
            var password = document.querySelector("#password");
            var finduser = document.querySelector("finduser");

            var signinBtn = document.querySelector("#signin"); 
            var fulldetailsBtn = document.querySelector("#fulldetails");

            function Signin() {
                set(ref(db,"Peoples/" + username.value),{
                    Username: username.value,
                    Mixedwaste: mixedwaste.value,
                    Drywaste: drywaste.value,
                    Wetwaste: wetwaste.value,
                    Sponsorwaste: sponsorwaste.value,
                    Password: password.value
                })
                .then(()=>{
                    alert("Data added successfully!!")
                })
                .catch((error)=>{
                    alert(error)
                });
            }

            signinBtn.addEventListener('click',Signin);

            function GetToken() {
                const dbref = ref(db);

                get(child(dbref, "Peoples/" + finduser.value))
                .then((snapshot) => {
                    if (snapshot.exist()) {
                        console.log("debug")
                        getToken.innerHTML = snapshot.val().Totaltokens;
                    } else {
                        alert("No data found");
                    }
                })
                .catch((error) =>{
                    alert(error)
                })
            }
            fulldetailsBtn.addEventListener('click', GetToken);

          </script>
    </body>
</html>
